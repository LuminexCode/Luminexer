local UserInputService = game:GetService("UserInputService")

-- GUI Oluşturma
local function createGuiForPlayer(player)
	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "AdminGui"
	screenGui.ResetOnSpawn = false -- Ölünce kaybolmaması için
	screenGui.Parent = player:WaitForChild("PlayerGui")
	screenGui.Enabled = false -- Başlangıçta GUI kapalı

	-- Gradient Arka Plan
	local background = Instance.new("Frame")
	background.Size = UDim2.new(0, 350, 0, 800)
	background.Position = UDim2.new(0, 50, 0, 50)
	background.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
	background.BackgroundTransparency = 0.5
	background.Parent = screenGui

	local gradient = Instance.new("UIGradient")
	gradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 150, 255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 150))
	}
	gradient.Parent = background

	-- ScrollingFrame
	local scrollingFrame = Instance.new("ScrollingFrame")
	scrollingFrame.Size = UDim2.new(1, 0, 1, 0)
	scrollingFrame.CanvasSize = UDim2.new(0, 0, 5, 0) -- İçeriği sığdırmak için yeterince büyük bir CanvasSize
	scrollingFrame.ScrollBarThickness = 5
	scrollingFrame.Parent = background

	local uiListLayout = Instance.new("UIListLayout")
	uiListLayout.Padding = UDim.new(0, 10)
	uiListLayout.Parent = scrollingFrame

	-- Buton oluşturma fonksiyonu
	local function createButton(name, text, callback)
		local button = Instance.new("TextButton")
		button.Name = name
		button.Text = text
		button.Size = UDim2.new(0, 300, 0, 50)
		button.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		button.Font = Enum.Font.Roboto
		button.TextSize = 18
		button.Parent = scrollingFrame

		local buttonGradient = Instance.new("UIGradient")
		buttonGradient.Color = ColorSequence.new{
			ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 150, 255)),
			ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 150))
		}
		buttonGradient.Parent = button

		local uiCorner = Instance.new("UICorner")
		uiCorner.CornerRadius = UDim.new(0, 10)
		uiCorner.Parent = button

		button.MouseButton1Click:Connect(callback)
	end

	-- Ek özellikler ve butonlar
	local features = {
		{ "Kill", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
				targetPlayer.Character.Humanoid.Health = 0
			end
		end },
		{ "Freeze", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
				targetPlayer.Character.HumanoidRootPart.Anchored = true
			end
		end },
		{ "Kick", function(targetPlayer)
			targetPlayer:Kick("Admin tarafından atıldınız.")
		end },
		{ "Unfreeze", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
				targetPlayer.Character.HumanoidRootPart.Anchored = false
			end
		end },
		{ "Heal", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
				targetPlayer.Character.Humanoid.Health = targetPlayer.Character.Humanoid.MaxHealth
			end
		end },
		{ "Speed Boost", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
				targetPlayer.Character.Humanoid.WalkSpeed = 100
			end
		end },
		{ "Normal Speed", function(targetPlayer)
			if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
				targetPlayer.Character.Humanoid.WalkSpeed = 16
			end
		end },
		{ "Invisibility", function(targetPlayer)
			if targetPlayer.Character then
				for _, part in ipairs(targetPlayer.Character:GetChildren()) do
					if part:IsA("BasePart") then
						part.Transparency = 1
					end
				end
			end
		end },
		{ "Visibility", function(targetPlayer)
			if targetPlayer.Character then
				for _, part in ipairs(targetPlayer.Character:GetChildren()) do
					if part:IsA("BasePart") then
						part.Transparency = 0
					end
				end
			end
		end },
		{ "Teleport to Spawn", function(targetPlayer)
			local spawnLocation = game.Workspace:FindFirstChild("SpawnLocation")
			if spawnLocation then
				if targetPlayer.Character then
					targetPlayer.Character:SetPrimaryPartCFrame(spawnLocation.CFrame)
				end
			end
		end }
	}

	for i, feature in ipairs(features) do
		-- "Me" butonu
		createButton("Button" .. i .. "Me", feature[1] .. " Me", function()
			feature[2](player)
		end)

		-- "Others" butonu
		createButton("Button" .. i .. "Others", feature[1] .. " Others", function()
			for _, p in ipairs(game.Players:GetPlayers()) do
				if p ~= player then
					feature[2](p)
				end
			end
		end)

		-- "All" butonu
		createButton("Button" .. i .. "All", feature[1] .. " All", function()
			for _, p in ipairs(game.Players:GetPlayers()) do
				feature[2](p)
			end
		end)
	end

	-- GUI'yi açıp kapamak için tuş olayı
	UserInputService.InputBegan:Connect(function(input)
		if input.KeyCode == Enum.KeyCode.L then
			screenGui.Enabled = not screenGui.Enabled
		end
	end)
end

-- Oyuncu katıldığında GUI ekleme
game.Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function(character)
		createGuiForPlayer(player)
	end)
end)

-- Mevcut oyuncular için GUI ekleme
for _, player in ipairs(game.Players:GetPlayers()) do
	if player.Character then
		createGuiForPlayer(player)
	end
	player.CharacterAdded:Connect(function(character)
		createGuiForPlayer(player)
	end)
end

